<h3>予定一覧</h3>

<p><%= link_to "新規登録", :new_post %></p>

<% if flash[:success] %>
  <p class="alert_success"><%= flash[:success] %></p>
<% else flash[:failure] %>
  <p class="alert_failure"><%= flash[:failure] %></p>
 <% end %> 

<% if flash[:notice] %>
 <p class= "notice"><%= flash[:notice] %></p>
<% end %>

<table>
 <thead>
  <tr>
   <th>ID</th>
   <th>タイトル</th>
   <th>開始日</th>
   <th>終了日</th>
   <th>終日</th>
   <th>更新日</th>
   <th>詳細</th>
   <th>編集</th>
   <th>削除</th>
  </tr>
 </thead>

 <tbody>
 <% @posts.each do |post| %>
    <tr>
     <td><%= post.id %></td>
     <td><%= post.title %></td>
     <td><%= post&.start&.strftime("%Y年%m月%d日") %></td>
     <td><%= post&.finish&.strftime("%Y年%m月%d日") %></td>
     <td>
      <% if post.day == true %>
      <%= "○" %>
      <% else post.day == false %>
      <% end %> 
     </td>
     <td><%= post.updated_at.to_s(:datetime_jp) %></td>
     <td><%= link_to "詳細", post %></td>
     <td><%= link_to "編集", [:edit, post] %></td>
     <td><%= link_to "削除", post, data: {turbo_method: :delete, turbo_confirm: "予定を削除しますか？"} %></td> 

    </tr>
  <% end %>
 </tbody>
</table>

<footer class = "footer_container">
    <p>本日の日付 : <%= Date.current.strftime("%Y年%m月%d日") %></p>
    <p>スケジュール合計 : <%= @posts.count %></p> 
  </footer>